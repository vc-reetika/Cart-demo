<app-header></app-header>

<div class="products-list">
    <div *ngFor="let data of productList.flat()">
        <mat-card class="example-card">

            <mat-card-header>
                <mat-card-title>{{data.title}}</mat-card-title>
            </mat-card-header>

            <mat-card-content>
                <p>This card has divider and indeterminate progress as footer</p>
                <mat-divider></mat-divider>
            </mat-card-content>

            <mat-card-actions>
                <mat-card-title>{{data.totalPrice | currency:'INR'}}</mat-card-title>
                <button mat-button (click)="increase(data)">+</button>
                {{data.totalItem}}
                <button mat-button (click)="decease(data)">-</button>
            </mat-card-actions>
        </mat-card>
    </div>


    <mat-card class="card">

        <mat-card-header>
            <mat-card-title>Bill Detail</mat-card-title>
        </mat-card-header>


        <mat-card-content>
            Item Name Price
            <div *ngFor="let data of transactions.flat()">
                {{data.title}}
                {{data.totalPrice}}
            </div>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions>
            <mat-card-title> Total {{Total}} </mat-card-title>
            <div *ngFor="let discount of coupon">
                <div *ngIf="Total >= discount.totalPrice">
                    <mat-card-title>
                        {{discount.discount | currency:'INR'}}
                        <button (click)="apply(discount.discount, Total)">Apply</button>
                        <div *ngIf="clicked">
                            <button (click)="remove(discount.discount)">Remove</button>
                            <mat-divider></mat-divider>
                            <div class="discount">
                                <div>
                                    discount : - {{discountCoupon | currency:'INR'}}
                                </div>
                            </div>
                        </div>

                    </mat-card-title>
                </div>
            </div>
            Grand Total : {{grantTotal | currency:'INR'}}
        </mat-card-actions>
    </mat-card>


    <!-- 
    <table mat-table [dataSource]="transactions" class="mat-elevation-z8">
        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef> Title </th>
            <td mat-cell *matCellDef="let transaction"> {{transaction.title}} </td>
            <td mat-footer-cell *matFooterCellDef> Discount </td>
            <td mat-footer-cell *matFooterCellDef> Total </td>
        </ng-container>

        <ng-container matColumnDef="totalPrice">
            <th mat-header-cell *matHeaderCellDef> TotalPrice </th>
            <td mat-cell *matCellDef="let transaction"> {{transaction.totalPrice | currency:'INR'}} </td>
            <td mat-footer-cell *matFooterCellDef> {{discount()}} </td>
            <td mat-footer-cell *matFooterCellDef> {{getTotalCost() | currency:'INR'}} </td>
        </ng-container>

        

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns, discount"></tr>
    </table> -->
</div>




<app-footer></app-footer>